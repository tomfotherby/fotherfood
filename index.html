<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Author: Tom Fotherby
Version: FothoFood v0.1 (14/Nov/2008)
Softwara License: GNU General Public License v3+

Feature List:
 * Click-to-add recipes
 * Click-to-add regular shopping items (e.g. milk, bread, eggs, etc)
 * Number of portions is tracked
 * "More Info" Dropdown box for each recipe
 * Identical ingredients are summed together in the shopping list
 * Shopping list is sorted by ingredients
 * Print mode - Only shows Shopping list

ToDo List: 
 * Group related items in the shopping list (e.g. veg, pasta, fruit etc).
 * Include a pic of each recipe
 * Store recipes in a standard format (e.g. XML) and read them in dynamically when the page loads.
 * Give each recipe a price 
 * Have method for searching for quick recipes or cheap recipes
 * Link with Tesco.com to automatically add to shopping basket
-->
<html>

 <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      <title>Shopping List Generator</title>
      <style type="text/css" media="screen"><!--
body {
  margin: 30px;
  font: 'Trebuchet MS',Arial,sans-serif;
}

h1,h3 {
  color: #8DC63F;
}

h4 {
  margin: 0px;
  color: #8DC63F;
}

img {
  border: 0;
}

.recipe {
  padding: 5px;
  border: 1px solid #999;
  margin: 5px;
}

#ShoppingList {
  padding: 10px;
  background: #FFF;
  margin: 10px;
}
      --></style>

      <style type="text/css" media="print"><!--
.recipe {
  display: none;
}
.noPrint {
  display: none;
}
      --></style>
<script type="text/javascript">

// Define some global associative array variables
var recipeList   = new Object();
var shoppingList = new Object();
var units        = new Object();

// Define various units for the different ingredients
units["Penne Pasta"]                   = "g";
units["Butternut Squash"]              = "g";
units["Soft Goats Cheese"]             = "g";
units["Low Fat Cooking Spray"]         = " squirts";
units["Salt & Pepper"]                 = " pinches";
units["Sunflower Oil"]                 = " tbsp";
units["Root Ginger"]                   = " tsp";
units["Basmati Rice"]                  = "g";
units["Rice"]                          = "g";
units["Vegetable Stock"]               = "ml";
units["Raisins"]                       = "g";
units["Flaked Almonds"]                = "g";
units["Fresh Coriander"]               = " tbsp";
units["Natural Bio-yogurt"]            = "ml";
units["Greek Yogurt"]                  = "ml";
units["Sunflower Margarine"]           = " tsp";
units["Swede"]                         = "g";
units["Parsnips"]                      = "g";
units["Plain Flour"]                   = "g";
units["Dry Cider"]                     = "ml";
units["Prunes"]                        = "g";
units["Dijon Mustard"]                 = " tsp";
units["Low Fat Mature Cheddar Cheese"] = "g";
units["Macaroni"]                      = "g";
units["Veggie Parmesan"]               = "g";
units["Polyunsaturated Margarine"]     = "g";
units["Skimmed Milk"]                  = "ml";
units["Mushrooms"]                     = "g";
units["Whole-Grain mustard"]           = " tbsp";

///////////////////////////////////////////////////////////////////////
// Adds Ingredients to the Shopping List + (change text of portions displayed and shopping list)
function modifyButternutSquashPasta(idOfCounter,incOrDec)
{
   modifyShoppingList("Penne Pasta",           50,  incOrDec);
   modifyShoppingList("Butternut Squash",      150, incOrDec);
   modifyShoppingList("Sage Leaves",           3,   incOrDec);
   modifyShoppingList("Soft Goats Cheese",     25,  incOrDec);
   modifyShoppingList("Garlic Cloves",         1,   incOrDec);
   modifyShoppingList("Low Fat Cooking Spray", 1,   incOrDec);
   modifyShoppingList("Salt & Pepper",         1,   incOrDec);

   modifyRecipeList(idOfCounter, 1, incOrDec);
   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Adds Ingredients to the Shopping List + (change text of portions displayed and shopping list)
function modifySpicyPilaf(recipeName,incOrDec)
{
   modifyShoppingList("Sunflower Oil",      2,  incOrDec);
   modifyShoppingList("Onions",             1, incOrDec);
   modifyShoppingList("Garlic Cloves",      2,   incOrDec);
   modifyShoppingList("Root Ginger",        2,  incOrDec);
   modifyShoppingList("Carrots",             1,   incOrDec);
   modifyShoppingList("Aubergine",          1,   incOrDec);
   modifyShoppingList("Mild curry paste",   1,   incOrDec);
   modifyShoppingList("Basmati Rice",       240,   incOrDec);
   modifyShoppingList("Vegetable Stock",    750,   incOrDec);
   modifyShoppingList("Raisins",            60,   incOrDec);
   modifyShoppingList("Flaked Almonds",     60,   incOrDec);
   modifyShoppingList("Fresh Coriander",    3,   incOrDec);
   modifyShoppingList("Natural Bio-yogurt", 300,   incOrDec);

   modifyRecipeList(recipeName, 4, incOrDec);
   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Adds Ingredients to the Shopping List + (change text of portions displayed and shopping list)
function modifyParsnipPruneCasserole(idOfCounter,incOrDec)
{
   modifyShoppingList("Sunflower Margarine", 4,  incOrDec);
   modifyShoppingList("Onions",              1,  incOrDec);
   modifyShoppingList("Leeks",               1,  incOrDec);
   modifyShoppingList("Parsnips",            300,  incOrDec);
   modifyShoppingList("Carrots",             3,  incOrDec);
   modifyShoppingList("Swede",               240,  incOrDec);
   modifyShoppingList("Plain Flour",         30,  incOrDec);
   modifyShoppingList("Dry Cider",           150,  incOrDec);
   modifyShoppingList("Vegetable Stock",     600,  incOrDec);
   modifyShoppingList("Bay Leaves",          2,  incOrDec);
   modifyShoppingList("Prunes",              120,  incOrDec);
   modifyShoppingList("Greek Yogurt",        150,  incOrDec);
   modifyShoppingList("Sage Leaves",         2,  incOrDec);
   modifyShoppingList("Salt & Pepper",       1,   incOrDec);
   modifyShoppingList("Rice",                240,  incOrDec);

   modifyRecipeList(idOfCounter, 4, incOrDec);
   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Adds Ingredients to the Shopping List + (change text of portions displayed and shopping list)
function modifyMacaroniCheese(idOfCounter,incOrDec)
{
   modifyShoppingList("Macaroni",                     125,  incOrDec);
   modifyShoppingList("Polyunsaturated Margarine",    25,  incOrDec);
   modifyShoppingList("Plain Flour",                  25,  incOrDec);
   modifyShoppingList("Vegetable Stock",              150,  incOrDec);
   modifyShoppingList("Skimmed Milk",                 150,  incOrDec);
   modifyShoppingList("Salt & Pepper",                1,  incOrDec);
   modifyShoppingList("Dijon Mustard",                0.5,  incOrDec);
   modifyShoppingList("Low Fat Mature Cheddar Cheese",40,  incOrDec);
   modifyShoppingList("Thyme Leaves",                 1,  incOrDec);
   modifyShoppingList("Cherry Tomatoes",              6,  incOrDec);
   modifyShoppingList("Veggie Parmesan",              9,   incOrDec);

   modifyRecipeList(idOfCounter, 2, incOrDec);
   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Adds Ingredients to the Shopping List + (change text of portions displayed and shopping list)
function modifyLeekMushroomPie(idOfCounter,incOrDec)
{
   modifyShoppingList("Plain Flour",              200,  incOrDec);
   modifyShoppingList("Salt & Pepper",            1,  incOrDec);
   modifyShoppingList("Polyunsaturated Margarine",130,  incOrDec);
   modifyShoppingList("Veggie Parmesan",          15,  incOrDec);
   modifyShoppingList("Thyme Leaves",             3,  incOrDec);
   modifyShoppingList("Leeks",                    4,  incOrDec);
   modifyShoppingList("Vegetable Stock",          300,  incOrDec);
   modifyShoppingList("Mushrooms",                450,  incOrDec);
   modifyShoppingList("Skimmed Milk",             300,  incOrDec);
   modifyShoppingList("Whole-Grain mustard",      1,  incOrDec);;


   modifyRecipeList(idOfCounter, 4, incOrDec);
   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Adds items (that aren't recipes) to the Shopping List
function AddShoppingListItem(ingredient)
{
   if (document.getElementById(ingredient).checked) {
      modifyShoppingList(ingredient,1,'+');
   } else {
      modifyShoppingList(ingredient,1,'-');
   }

   updateShoppingList();
}

///////////////////////////////////////////////////////////////////////
// Utility function to add or subtract ingredients to/from the shopping list.
function modifyRecipeList(recipeName,numOfPortions,incOrDec)
{

   // Add or subtract a certain amount of portions for this recipe
   if (incOrDec == "+") {
    if (recipeList[recipeName]) {
      recipeList[recipeName] += numOfPortions;
    } else {
      recipeList[recipeName] = numOfPortions;
    }
   } else {
      if (recipeList[recipeName] > 0) {
         recipeList[recipeName] -= numOfPortions;
      }
   }

   // Shade this recipe so it is clear it has been selected
   if (recipeList[recipeName] && recipeList[recipeName] > 0) {
      document.getElementById(recipeName).style.background = "#C0C0C0";
   } else {
      document.getElementById(recipeName).style.background = "white";
   }

   // Update portion count of this recipe
   recipeCountID = recipeName + "Count";
   document.getElementById(recipeCountID).innerHTML = recipeList[recipeName].toString();
}

///////////////////////////////////////////////////////////////////////
// Utility function to add or subtract ingredients to/from the shopping list.
function modifyShoppingList(ingredient,amount,incOrDec)
{
   if (incOrDec == "+") {
    if (shoppingList[ingredient]) {
      shoppingList[ingredient] += amount;
    } else {
      shoppingList[ingredient] = amount;
    }
   } else {
    if (shoppingList[ingredient]) {
      shoppingList[ingredient] -= amount;
      if (shoppingList[ingredient] <= 0) {
       delete shoppingList[ingredient];
      }
    } 
   }
}

///////////////////////////////////////////////////////////////////////
// Sort an Assositive array
function AssosSort(assoArray)
{
   var ingredientKeys = new Array();
   var shoppingList2  = new Object();

   // Collect ingredients into an normal array so we can sort it (assositive arrays can't be sorted directly).
   for (var itemA in assoArray) 
     ingredientKeys.push(itemA);

   // Sort the normal array and then use it to re-create the assositive array in sorted order.
   for (var itemB in ingredientKeys.sort()) 
     shoppingList2[ingredientKeys[itemB]] = assoArray[ingredientKeys[itemB]];

   return shoppingList2;
}

///////////////////////////////////////////////////////////////////////
// Updates the page with the new shopping list
function updateShoppingList() 
{
   // Gather recipes
   var recipeText = "";
   for (recipe in recipeList) 
   {
     if (recipeList[recipe] > 0) {
        recipeText += "<li>" + recipe + " portions: " + recipeList[recipe];
        recipeSouceID = recipe + "Source";
        if (recipeSouceID && document.getElementById(recipeSouceID).innerHTML)
           recipeText += "  <i>(" + document.getElementById(recipeSouceID).innerHTML + ")</i>";
        recipeText += "</li>";
     }
   }

   // Gather recipe ingredients (and sort them)
   var listText = "";
   for (var item in AssosSort(shoppingList)) 
   {
     var unitsText = (units[item])?units[item]:"";
     listText += "<tr><td>" + item + "</td><td>" + shoppingList[item] + unitsText + "</td></tr>";
   }

   // Output the text
   if (listText.length == 0) 
   {
     document.getElementById("ShoppingList").innerHTML = "<h3>Shopping List</h3>\n<i>Empty</i>\n";
   } else {
     document.getElementById("ShoppingList").innerHTML = "<h3>Shopping List</h3>\n<ul>\n"+recipeText+"</ul>\n<table>" + listText + "</table>\n";
   }
}

///////////////////////////////////////////////////////////////////////
// Expand or collapse a element with an id.
function showHide(elementid){
   if (document.getElementById(elementid).style.display == 'none'){
      document.getElementById(elementid).style.display = '';
   } else {
      document.getElementById(elementid).style.display = 'none';
   }
} 
</script>
 </head>

<body onload="updateShoppingList();">

<h1 class="noPrint">Grocery Shopping List Generator</h1>

<div class="noPrint"><i>What is this?</i> This is Fothofood v0.1. It is like speed dial for our Grocery shopping. See HTML source for more info.</div>

 <!-- Normal stuff on the list -->
<h3 class="noPrint">Regular Items</h3>
<table class="noPrint">
<tr><td>Bread:</td><td><input onclick="javascript:AddShoppingListItem('Bread');" id="Bread" type="checkbox"></td></tr>
<tr><td>Milk:</td><td><input onclick="javascript:AddShoppingListItem('Milk');" id="Milk" type="checkbox"></td></tr>
<tr><td>Eggs:</td><td><input onclick="javascript:AddShoppingListItem('Eggs');" id="Eggs" type="checkbox"></td></tr>
<tr><td>Fruit:</td><td><input onclick="javascript:AddShoppingListItem('Fruit');" id="Fruit" type="checkbox"></td></tr>
</table>

<h3 class="noPrint">Recipes</h3>

 <!-- Recipe: Butternut Squash Pasta -->
<div id="Butternut Squash Pasta" class="recipe">
<h4>WeightWatchers Butternut Squash and Goats Cheese Penne <img onclick="javascript:showHide('Butternut Squash Pasta Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="Butternut Squash Pasta Info" style="display:none;">
<ul>
<li>Source: <span id="Butternut Squash PastaSource">Page 28 of "WeightWatchers Cook!"</span></li>
<li>Points: 4</li>
<li>Preparation&Cooking Time: 15 minutes</li>
<li>Tom and Chloe rating: 8/10</li>
<li>Ingredients:
 <ul>
 <li>50g Dried Penne Pasta</li>
 <li>150g Butternut Squash, peeled, deseeded and chopped into bite size pieces</li>
 <li>3 Sage Leaves, shredded</li>
 <li>25g Soft Goats Cheese, crumbled</li>
 <li>1 Garlic Clove, sliced</li>
 <li>Low Fat Cooking Spray</li>
 <li>Salt & Pepper</li>
 </ul>
</ul>
</div>
Portions: <img onclick="javascript:modifyButternutSquashPasta('Butternut Squash Pasta','-');" alt="-" src="minus.gif" /> <span id="Butternut Squash PastaCount">0</span> <img onclick="javascript:modifyButternutSquashPasta('Butternut Squash Pasta','+');" alt="+" src="plus.gif" />
</div>

<!-- Recipe: WeightWatchers Spicy Pilaf -->
<div id="Spicy Pilaf" class="recipe">
<h4>WeightWatchers Spicy Pilaf <img onclick="javascript:showHide('Spicy Pilaf Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="Spicy Pilaf Info" style="display:none;">
<ul>
<li>Source: <span id="Spicy PilafSource">Page 14 of the little green WeightWatchers Vegetarian cooking book</span></li>
<li>Points: 7.5</li>
<li>Preparation&Cooking Time: 35 minutes</li>
<li>Tom and Chloe rating: 9/10</li>
<li>Ingredients:
 <ul>
 <li>2 tbsp sunflower oil</li>
 <li>1 onion, chopped</li>
 <li>2 garlic cloves, crushed</li>
 <li>2 tsp grated root ginger</li>
 <li>1 carrot, chopped</li>
 <li>1 small aubergine, chopped</li>
 <li>3 tbsp mild curry paste</li>
 <li>240g white basmati rice</li>
 <li>750ml vegetable stock</li>
 <li>60g raisins</li>
 <li>60g flaked almonds</li>
 <li>3 tbsp fresh coriander</li>
 <li>300ml natural bio-yogurt</li>
 </ul>
</ul>
</div>
Portions: <img onclick="javascript:modifySpicyPilaf('Spicy Pilaf','-');" alt="-" src="minus.gif" /> <span id="Spicy PilafCount">0</span> <img onclick="javascript:modifySpicyPilaf('Spicy Pilaf','+');" alt="+" src="plus.gif" />
</div>


<!-- Recipe: WeightWatchers Parsnip and Prune Casserole -->
<div id="Parsnip and Prune Casserole" class="recipe">
<h4>WeightWatchers Parsnip and Prune Casserole <img onclick="javascript:showHide('Parsnip and Prune Casserole Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="Parsnip and Prune Casserole Info" style="display:none;">
<ul>
<li>Source: <span id="Parsnip and Prune CasseroleSource">Page 24 of the little green WeightWatchers Vegetarian cooking book</span></li>
<li>Points: 7</li>
<li>Preparation&Cooking Time: 40 minutes</li>
<li>Tom and Chloe rating: 7/10</li>
<li>Ingredients:
 <ul>
 <li>4 tsp sunflower margarine</li>
 <li>1 onion, chopped</li>
 <li>1 leek, sliced</li>
 <li>300g Parsnips, chopped</li>
 <li>240g carrots, sliced</li>
 <li>240g swede, chopped</li>
 <li>30g plain flour</li>
 <li>150ml dry cider</li>
 <li>600ml vegetable stock</li>
 <li>2 bay leaves</li>
 <li>120g Prunes</li>
 <li>150ml Greek Yogurt</li>
 <li>2 tsps fresh sage</li>
 <li>240g rice</li>
 </ul>
</ul>
</div>
Portions: <img onclick="javascript:modifyParsnipPruneCasserole('Parsnip and Prune Casserole','-');" alt="-" src="minus.gif" /> <span id="Parsnip and Prune CasseroleCount">0</span> <img onclick="javascript:modifyParsnipPruneCasserole('Parsnip and Prune Casserole','+');" alt="+" src="plus.gif" />
</div>


<!-- Recipe: WeightWatchers Macaroni Cheese -->
<div id="Macaroni Cheese" class="recipe">
<h4>WeightWatchers Macaroni Cheese <img onclick="javascript:showHide('Macaroni Cheese Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="Macaroni Cheese Info" style="display:none;">
<ul>
<li>Source: <span id="Macaroni CheeseSource">Page 100 of WeightWatchers "CookEatEnjoy"</span></li>
<li>Points: 7</li>
<li>Preparation Time: 15</li>
<li>Cooking Time: 15</li>
<li>Tom and Chloe rating: ?</li>
<li>Ingredients:
 <ul>
 <li>125g macaroni</li>
 <li>25g low fat polyunsaturated margarine</li>
 <li>25g plain flour</li>
 <li>150ml vegetable stock</li>
 <li>150ml skimmed milk</li>
 <li>salt and pepper</li>
 <li>1/2 teaspoon Dijon mustard</li>
 <li>40g mature half fat Cheddar cheese, grated</li>
 <li>1 teaspoon thyme leaves</li>
 <li>6 cherry tomatoes, halved</li>
 <li>2 teaspoons veggie parmesan, grated</li>
 </ul>
</ul>
</div>
Portions: <img onclick="javascript:modifyMacaroniCheese('Macaroni Cheese','-');" alt="-" src="minus.gif" /> <span id="Macaroni CheeseCount">0</span> <img onclick="javascript:modifyMacaroniCheese('Macaroni Cheese','+');" alt="+" src="plus.gif" />
</div>


<!-- Recipe: WeightWatchers Leek and Mushroom Pie -->
<div id="Leek and Mushroom Pie" class="recipe">
<h4>WeightWatchers Leek and Mushroom Pie <img onclick="javascript:showHide('Leek and Mushroom Pie Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="Leek and Mushroom Pie Info" style="display:none;">
<ul>
<li>Source: <span id="Leek and Mushroom PieSource">Page 82 of WeightWatchers "CookEatEnjoy"</span></li>
<li>Points: 7</li>
<li>Preparation Time: 35</li>
<li>Cooking Time: 30</li>
<li>Tom and Chloe rating: 9/10</li>
<li>Ingredients for the pastry:
 <ul>
 <li>150g plain flour and 1 tsp for rolling</li>
 <li>salt and pepper</li>
 <li>80g low fat polyunsaturated margarine</li>
 <li>15g veggie parmesan, grated</li>
 <li>1 tablespoon freshly chopped thyme</li>
 </ul>
<li>Ingredients for the filling:
 <ul>
 <li>50g low fat polyunsaturated margarine</li>
 <li>4 large leeks, trimmed, washed and sliced</li>
 <li>300ml vegetable stock</li>
 <li>450g mushrooms, quartered</li>
 <li>40g plain flour</li>
 <li>300ml skimmed milk</li>
 <li>1 tablespoon Whole grain mustard</li>
 </ul></ul>
</div>
Portions: <img onclick="javascript:modifyLeekMushroomPie('Leek and Mushroom Pie','-');" alt="-" src="minus.gif" /> <span id="Leek and Mushroom PieCount">0</span> <img onclick="javascript:modifyLeekMushroomPie('Leek and Mushroom Pie','+');" alt="+" src="plus.gif" />
</div>


<!-- Recipe: REPLACE -->
<!--
<div id="REPLACE" class="recipe">
<h4>REPLACE <img onclick="javascript:showHide('REPLACE Info')" alt="-/+" src="dropDown.jpg" /></h4>
<div id="REPLACE Info" style="display:none;">
<ul>
<li>Source: REPLACE</li>
<li>Points: REPLACE</li>
<li>Preparation&Cooking Time: REPLACE</li>
<li>Tom and Chloe rating: REPLACE</li>
<li>Ingredients:
 <ul>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 <li></li>
 </ul>
</ul>
</div>
Portions: <img onclick="javascript:modifyREPLACE('REPLACE','-');" alt="-" src="minus.gif" /> <span id="REPLACECount">0</span> <img onclick="javascript:modifyREPLACE('REPLACE','+');" alt="+" src="plus.gif" />
</div>
-->


<!-- Place holder for the shopping list test (it will be dynamically updated) -->
<div id="ShoppingList"></div>

</body>
</html>

